---
title: "netflix_transmutation"
author: "@grevend, @Fynn-Mehrens"
date: "13 12 2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(readxl)
```

## Importing from other Rmd file

```{r child = 'netflix_originals.Rmd'}
```

```{r}
netflix_originals <- netflix_originals
# netflix_originals <- read.csv("../datasets/netflix_originals.csv")
netflix_originals
```

## Transmutation of the given Netflix series and movie table

```{r}
netflix_originals <- filter(netflix_originals,
                            !grepl("Pending|pending", Title),
                            Title != "Awaiting release",
                            !grepl("Miniseries|miniseries", Title),
                            !grepl("Renewed|renewed", Title),
                            !grepl("due to premiere", Title))

transmuted <- transmute(netflix_originals, 
                                Title = Title,
                                Genre = Genre,
                                Premiere = Premiere,
                                Episodes = strtoi(ifelse(!is.na(str_match(Seasons, "([0-9]+) (episode*)")[,2]),
                                                  str_match(Seasons, "([0-9]+) (episode*)")[,2],
                                                  NA)),
                                Seasons = strtoi(ifelse(!is.na(str_match(Seasons, "([0-9]) (season.*|part.*|volume.*)")[,2]),
                                                  str_match(Seasons, "([0-9]) (season.*|part.*|volume.*)")[,2],
                                                  NA)),
                                Min_Time = strtoi(ifelse(!is.na(str_match(Runtime, "([0-9]+)-([0-9]+)")[,2]),
                                                  str_match(Runtime, "([0-9]+)-([0-9]+)")[,2],
                                                  str_match(Runtime, "([0-9]+)")[,2])),
                                Max_Time = strtoi(ifelse(!is.na(str_match(Runtime, "([0-9]+)-([0-9]+)")[,3]),
                                                  str_match(Runtime, "([0-9]+)-([0-9]+)")[,3],
                                                  str_match(Runtime, "([0-9]+)")[,2])),
                                Status = Status
                               )

unique(select(netflix_originals, Seasons))

transmuted

anti_join(transmuted, netflix_originals)
```

```{r}
string <- "23 min."

!is.na(str_match(string, "([0-9]+)-([0-9]+)")[,3])
str_match(string, "([0-9]+)")[,2]

matcher <- str_match(string, "([0-9]+)")
matcher
```

```{r}
string <- "2 seasons, 24 episodes"
!is.na(str_match(string, "([0-9])( season)"))
str_match(string, "([0-9])( season)")
```

